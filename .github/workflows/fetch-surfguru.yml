name: Surfguru Natal Di√°rio

on:
  schedule:
    - cron: "0 13 * * *"
  workflow_dispatch:  


jobs:
  save-webpage:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Get Current Date
        id: date
        run: echo "::set-output name=date::$(date +'%Y-%m-%d')"

      - name: Download Webpage
        run: |
          wget --adjust-extension --span-hosts --convert-links --backup-converted --no-directories --timestamping --page-requisites --directory-prefix=${{ steps.date.outputs.date }} --tries=1 -e robots=off      https://surfguru.com.br/previsao/brasil/rio-grande-do-norte/natal/oceanica 
          rm ${{ steps.date.outputs.date }}/*.jpg ${{ steps.date.outputs.date }}/*.jpeg ${{ steps.date.outputs.date }}/*.png

      - name: Commit Changes
        run: |
          git config --global user.name "GitHub Actions"
          git config --global user.email "actions@github.com"
          git add "webpage-${{ steps.date.outputs.date }}.html"
          git commit -m "Update webpage content"
          git push
